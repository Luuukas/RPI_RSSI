### 树莓派 WIFI/BLUETOOTH RSSI 室内定位实验

#### ——泳池求助手环

##### 思路：

​	把平面分成n*m个单位，用两台以上固定设备开启蓝牙/WIFI，在各个单位中心进行测试收集数据，把扫描到固定设备的信号强度记录下来并与该点坐标关联，用于以后在平面某点发送数据（在该点收集到的各固定设备的信号强度）到服务器时，运用KDtree（本质上就是想算欧氏距离下的临近点，用KDtree只是想用用试试，直接遍历来找临近点也是可以的），在收集的点中找出最邻近区域，认为当前发送数据的点即在该区域中。

##### 实现：

​	树莓派上用python库处理引脚信号，收集某一时刻附近所有设备名及其对应RSSI。通过按钮“短长短”（有点SOS的感觉）触发，把数据发送到服务器（Node.js），数据经过查找“临近点”后返回估计映射到的平面坐标，同时调用数据库（Mysql）查找相应id的其他信息，用socket.io推送到网页，点亮估计区域及展示其他信息。

##### 总结：

	1. 某些设备（手机、电脑）开启蓝牙后，其被扫描时显示的设备名可能会定时随机刷新，即设备名并不是稳定不变的；
 	2. 由于信号的衍射反射等，在室内测得的各设备的信号强度与预期会有一定出入；
 	3. 运用KDtree实际上已经不太正确了，思路中把信号强度与距离之间的关系简单地看作是线性的，试图用信号强度算欧氏距离决定“临近点”，事实这种思路是错的。
 	4. 收集蓝牙信息比收集wifi信息慢很多；

##### 提出改进：

	1. 可尝试增加固定设备的数量；
 	2. 如果只是做实验，可以选择杂物尽量少的室内环境；
 	3. 把各设备信号强度映射到空间坐标，可以考虑采用机器学习的方式；

##### 线路图：

![线路图](.\images\线路图.png)

##### 事物连接图：

![实物图](.\images\实物图.jpg)